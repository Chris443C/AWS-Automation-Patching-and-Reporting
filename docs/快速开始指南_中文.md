# 🚀 快速开始指南 - 5分钟部署

## 📋 准备工作清单

在开始之前，请确保您有以下信息：

### ✅ 必需信息
- [ ] AWS 账户登录信息
- [ ] 管理员权限
- [ ] 通知邮箱地址
- [ ] 目标服务器实例 ID

### 📦 需要下载的软件
- [ ] AWS CLI（命令行工具）
- [ ] PowerShell（Windows 用户）
- [ ] Python 3.8+（如果未安装）

---

## 🎯 第一步：一键部署（最简单方式）

### 1.1 下载项目
```bash
# 方法一：使用 Git
git clone https://github.com/your-org/aws-automation-patching-and-reporting.git

# 方法二：直接下载 ZIP 文件
# 1. 访问 GitHub 页面
# 2. 点击绿色的 "Code" 按钮
# 3. 选择 "Download ZIP"
# 4. 解压到本地文件夹
```

### 1.2 配置 AWS 凭据
```bash
# 打开命令行，运行：
aws configure

# 输入以下信息：
# AWS Access Key ID: [您的访问密钥]
# AWS Secret Access Key: [您的秘密密钥]
# Default region: us-east-1
# Default output format: json
```

### 1.3 运行部署脚本
```powershell
# 进入项目文件夹
cd aws-automation-patching-and-reporting

# 运行部署脚本（开发环境）
.\deploy.ps1 -Environment dev -NotificationEmail your-email@company.com

# 或者生产环境
.\deploy.ps1 -Environment prod -NotificationEmail admin@company.com
```

**🎉 恭喜！部署完成！**

---

## 🖥️ 第二步：配置服务器（2分钟）

### 2.1 为服务器添加标签

**方法一：使用 AWS 控制台（推荐）**
1. 登录 AWS 控制台
2. 进入 EC2 服务
3. 选择您的服务器
4. 点击 "Actions" → "Manage tags"
5. 添加标签：
   - Key: `PatchGroup`
   - Value: `dev-servers`（开发环境）或 `prod-servers`（生产环境）

**方法二：使用命令行**
```bash
aws ec2 create-tags --resources i-1234567890abcdef0 --tags Key=PatchGroup,Value=dev-servers
```

### 2.2 检查 Systems Manager 代理

**Windows 服务器：**
```powershell
Get-Service -Name AmazonSSMAgent
```

**Linux 服务器：**
```bash
sudo systemctl status amazon-ssm-agent
```

**如果代理未运行，请安装：**

**Amazon Linux 2：**
```bash
sudo yum install -y amazon-ssm-agent
sudo systemctl enable amazon-ssm-agent
sudo systemctl start amazon-ssm-agent
```

---

## 📧 第三步：设置通知（1分钟）

### 3.1 订阅邮件通知

1. 登录 AWS 控制台
2. 进入 SNS 服务
3. 找到主题：`PatchingApprovalNotifications-dev`
4. 点击主题名称
5. 点击 "Create subscription"
6. 选择协议：Email
7. 输入您的邮箱地址
8. 点击 "Create subscription"
9. **重要：** 检查邮箱并点击确认链接

---

## 🧪 第四步：测试系统（2分钟）

### 4.1 测试补丁扫描
```bash
# 替换为您的服务器实例 ID
aws ssm send-command --instance-ids i-1234567890abcdef0 --document-name "AWS-RunPatchBaseline" --parameters '{"Operation":["Scan"]}'
```

### 4.2 测试漏洞扫描
```bash
aws inspector2 start-scan --scan-type EC2 --resource-filter criteria='{"instanceTags":[{"key":"Environment","value":"dev"}]}'
```

---

## 📊 第五步：查看结果

### 5.1 查看仪表板
1. 登录 AWS 控制台
2. 进入 CloudWatch 服务
3. 点击 "Dashboards"
4. 找到 "PatchingAutomation-dev"
5. 查看各种指标

### 5.2 查看报告
1. 登录 AWS 控制台
2. 进入 S3 服务
3. 找到您的报告存储桶
4. 浏览文件夹查看报告

### 5.3 查看邮件通知
检查您的邮箱，应该会收到：
- 部署成功通知
- 漏洞扫描结果
- 补丁审批请求

---

## 🎯 系统工作流程

### 自动工作流程
```
每天凌晨 2:00 → 扫描漏洞 → 下载补丁 → 发送通知
每天凌晨 4:00 → 安装已审批的补丁 → 生成报告
```

### 手动操作
```
收到邮件通知 → 查看补丁详情 → 审批/拒绝 → 系统安装
```

---

## 🔧 常见问题快速解决

### ❌ 问题：部署脚本失败
**解决方案：**
1. 检查 AWS CLI 是否安装：`aws --version`
2. 检查凭据：`aws sts get-caller-identity`
3. 重新运行：`.\deploy.ps1`

### ❌ 问题：服务器无响应
**解决方案：**
1. 检查代理状态：`Get-Service -Name AmazonSSMAgent`
2. 检查 IAM 角色权限
3. 检查网络连接

### ❌ 问题：没有收到邮件
**解决方案：**
1. 检查垃圾邮件文件夹
2. 确认 SNS 订阅状态
3. 重新订阅通知

---

## 📈 下一步操作

### 日常维护
- ✅ 每日查看邮件通知
- ✅ 每周检查补丁合规状态
- ✅ 每月审查安全报告

### 高级配置
- 🔧 调整自动审批规则
- 🔧 自定义扫描时间表
- 🔧 添加更多服务器

### 监控和优化
- 📊 查看 CloudWatch 仪表板
- 💰 监控 AWS 成本
- 🔒 定期安全审查

---

## 🆘 需要帮助？

### 快速支持
1. **查看日志**：CloudWatch → Log groups
2. **检查状态**：Systems Manager → Compliance
3. **查看报告**：S3 → 您的存储桶

### 联系支持
- 📧 创建 GitHub Issue
- 📞 联系 AWS 支持
- 📚 查看详细文档

---

## 🎉 恭喜您！

您已经成功部署了 AWS 自动化补丁管理系统！

**系统现在会自动：**
- 🔍 扫描安全漏洞
- 📥 下载可用补丁
- 📧 发送通知邮件
- ✅ 安装审批的补丁
- 📊 生成合规报告

**您只需要：**
- 📧 查看邮件通知
- ✅ 审批重要补丁
- 📊 定期查看报告

**就是这么简单！** 🚀 